# v0.52.1

# debug:disable_logs = false
# debug:overlay= true

## MONITORS ##
# monitor = DP-2,1920x1080@144,0x0,1,vrr,3
monitor = DP-2,1920x1080@144,0x0,1
monitor = HDMI-A-1,1920x1080,1920x0,1
# monitor = Unknown-1, disable


## START-UP EXECS ##
exec-once = uwsm app -- dunst -conf "~/.config/dunst/dunstrc"
exec-once = uwsm app -- hyprpaper 
exec-once = uwsm app -- wl-paste --type text --watch cliphist store
exec-once = uwsm app -- wl-paste --type image --watch cliphist store
exec-once = uwsm app -- nm-applet --indicator
exec-once = uwsm app -- solaar --window=hide  
exec-once = bash ~/.config/dotscripts/trayicons.sh
exec-once = [workspace 5 silent] uwsm app -- flatpak run md.obsidian.Obsidian
exec-once = [workspace 7 silent] uwsm app -- spotify --enable-features=WaylandLinuxDrmSyncobj --enable-features=UseOzonePlatform --ozone-platform=wayland --disable-gpu-sandbox
exec-once = uwsm app -- discord 



## ENVIRONMENT VARIABLES ##
# automatically set via uwsm
# env = XDG_CURRENT_DESKTOP,Hyprland
# env = XDG_SESSION_DESKTOP,Hyprland
# env = XDG_SESSION_TYPE,wayland
env = LIBVA_DRIVER_NAME,nvidia
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct
env = EGL_PLATFORM,wayland
env = QT_QPA_PLATFORM,wayland
env = QT_STYLE_OVERRIDE,gtk2
env = NIXOS_XDG_OPEN_USE_PORTAL,1
env = GTK_USE_PORTAL,1
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = NIXOS_OZONE_WL,1
env = MOZ_ENABLE_WAYLAND,1
env = MOZ_DISABLE_RDD_SANDBOX,1
env = MOZ_X11_EGL,1 
env = HYPRCURSOR_THEME,rose-pine-hyprcursor
env = HYPRCURSOR_SIZE,24


## INPUT ##
device {
    name = sonix-usb-device
    kb_layout = de,gr,ru
    kb_variant =,,phonetic
}

input {
    sensitivity = 0
    force_no_accel = true
    repeat_rate = 35
    repeat_delay = 300
    follow_mouse = 1
}

render {
     direct_scanout = 1
}


## LOOKS ## 
general {
    layout = dwindle
    border_size = 0
    gaps_in = 10
    gaps_out = 20

    # for loop animation
    # col.active_border = rgb(fa8d07) rgb(6E0561) rgb(47056e) rgb(6E0561) rgb(fa8d07)
    # col.active_border = rgb(00ffff) rgb(6E0561) rgb(47056e) rgb(6E0561) rgb(00ffff)
    col.active_border = rgb(520182)
    # no loop animation
    # adding more than one space between rgb values creates interesting translucent gaps
    # col.active_border = rgb(b34802) rgb(6E0561) rgb(47056e) rgb(47056e) rgb(6E0561) rgb(b34802)
    col.inactive_border = rgb(2e0347) 
    resize_on_border = true
    extend_border_grab_area = 24
    resize_corner = 0
    allow_tearing = true
}

decoration {
    rounding = 6 
    active_opacity = 1
    inactive_opacity = 1
    fullscreen_opacity = 1
   
	blur {
	  xray = false
	  size = 2
	  passes = 3
	  noise = 0
	  brightness = 1.1
	}

	shadow {
	  enabled = true
	  range = 20
	  render_power = 2
	  sharp = false
	  color = 0xff7a0151
	  color_inactive = 0xff0d0d0d
	}
}

cursor {
    enable_hyprcursor = true
    inactive_timeout = 5
    no_hardware_cursors = 2
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    animate_manual_resizes = false
    enable_swallow = true
    initial_workspace_tracking = 1 # no worky? https://github.com/hyprwm/Hyprland/issues/6255
    vrr = 0
}


## KREYGASM ##
animations {
    enabled = 1
    
    # bezier = winMove, 0.65, 1.3, 0.35, 1
    bezier = winOpen, 0.34, 1, 0.64, 1
    bezier = winClose, 0, 0.55, 0.45, 1
    bezier = linear, 0, 0, 1, 1
    bezier = switch, 0.65, 0, 0.35, 1
    bezier = exp, 0.04, 0.9, 0.04, 0.9
   
	animation = windowsMove, 1, 2, exp
	animation = windows, 1, 1.5, linear
    animation = windowsIn, 1, 1, winOpen, slide
    animation = windowsOut, 1, 8, winClose, popin
    # animation = borderangle, 1, 60, linear, loop
    animation = workspaces, 1, 1, switch, slidevert
}


## LAYOUT ##
dwindle { # TO-DO
    # no_gaps_when_only = 0
    smart_resizing = true
    # split_width_multiplier = 1.4
    # default_split_ratio = 0.8
    preserve_split = true
    # split_bias = 1
    # pseudotile = true
}


## CONTROLS ##
bind = SUPER_ALT,T,exec, [float;center] uwsm app -- kitty -e ~/.config/dotscripts/tasks.sh
bind = SUPER,P,exec, bash ~/.config/dotscripts/gamemode.sh # not really using it
bindr = SUPER,SUPER_L,exec, bash ~/.config/dotscripts/togglerofi.sh

bind = ALT,TAB,exec,rofi -show window
bind = SUPER,O,exec, rofi -show summon -modi "summon:~/.config/dotscripts/movetoactive.sh"
bind = SUPER,M,exec, rofi -show menu -window-title Power-Menu: -modi "menu:rofi-power-menu --choices=shutdown/lockscreen/suspend/reboot/logout"
bind = SUPER,T,exec, uwsm app -- kitty
bind = SUPER_ALT, Space, exec,[float;center] uwsm app -- kitty
bind = SUPER,E,exec, uwsm app -- kitty -o background_opacity=1 -o background=##0d0512 -e yazi
bind = SUPER,C, killactive
bind = SUPER,R, resizeactive,exact 1195 690

# maybe there is a setting for this now
bind = SUPER,LEFT,exec, bash ~/.config/dotscripts/movewindow.sh l
bind = SUPER,RIGHT,exec, bash ~/.config/dotscripts/movewindow.sh r
bind = SUPER,UP,exec, bash ~/.config/dotscripts/movewindow.sh u
bind = SUPER,DOWN,exec, bash ~/.config/dotscripts/movewindow.sh d
bind = SUPER,H,exec, bash ~/.config/dotscripts/movewindow.sh l
bind = SUPER,L,exec, bash ~/.config/dotscripts/movewindow.sh r
bind = SUPER,K,exec, bash ~/.config/dotscripts/movewindow.sh u
bind = SUPER,J,exec, bash ~/.config/dotscripts/movewindow.sh d
# bind = SUPER,H,movewindow,l
# bind = SUPER,L,movewindow,r
# bind = SUPER,K,movewindow,u
# bind = SUPER,J,movewindow,d

bind = SUPER_CTRL,LEFT,movefocus,l
bind = SUPER_CTRL,RIGHT,movefocus,r
bind = SUPER_CTRL,UP,movefocus,u
bind = SUPER_CTRL,DOWN,movefocus,d
bind = SUPER_CTRL,H,movefocus,l
bind = SUPER_CTRL,L,movefocus,r
bind = SUPER_CTRL,K,movefocus,u
bind = SUPER_CTRL,J,movefocus,d

bindr = ALT,Return,fullscreen,
bind = SUPER,F,togglefloating,
bind = SUPER,SPACE, centerwindow,

# focus floating
bind = SUPER_CTRL,F,cyclenext, visible floating

# move focus from floating to tiled
# key is รถ
# sth broke it
bind = SUPER_CTRL,odiaeresis,cyclenext, tiled

# hacky workaround to resize on the opposite side
# can't use binde bc the window stays the same size and floats away
bind = SUPERALTSHIFT,UP,resizeactive,0 20
bind = SUPERALTSHIFT,UP,moveactive, 0 -20

bind = SUPERALTSHIFT,LEFT,resizeactive,20 0
bind = SUPERALTSHIFT,LEFT,moveactive, -20 0

bind = SUPERALTSHIFT,RIGHT,resizeactive,-20 0
bind = SUPERALTSHIFT,RIGHT,moveactive, 20 0

bind = SUPERALTSHIFT,DOWN,resizeactive,0 -20
bind = SUPERALTSHIFT,DOWN,moveactive, 0 20

binde = SUPER_SHIFT,RIGHT,resizeactive,20 0
binde = SUPER_SHIFT,LEFT,resizeactive,-20 0
binde = SUPER_SHIFT,UP,resizeactive,0 -20
binde = SUPER_SHIFT,DOWN,resizeactive,0 20

binde = SUPER_SHIFT,L,resizeactive,80 0
binde = SUPER_SHIFT,H,resizeactive,-80 0
binde = SUPER_SHIFT,K,resizeactive,0 -80
binde = SUPER_SHIFT,J,resizeactive,0 80

bind = SUPERALTSHIFT,K,resizeactive,0 80
bind = SUPERALTSHIFT,K,moveactive, 0 -80

bind = SUPERALTSHIFT,H,resizeactive,80 0
bind = SUPERALTSHIFT,H,moveactive, -80 0

bind = SUPERALTSHIFT,L,resizeactive,-80 0
bind = SUPERALTSHIFT,L,moveactive, 80 0

bind = SUPERALTSHIFT,J,resizeactive,0 -80
bind = SUPERALTSHIFT,J,moveactive, 0 80

bindm = SUPER,mouse:272,movewindow
bindm = SUPER,mouse:273,resizewindow 2

bind = SUPER, V, exec, cliphist list | rofi -dmenu -window-title Clipboard: | cliphist decode | wl-copy
bind = SUPER_ALT, V, exec, cliphist wipe && notify-send System "Clipboard cleared" -u low
bind = , Print, exec, bash ~/.config/dotscripts/areascreenshot.sh
bind = SUPER ,Print, exec, bash ~/.config/dotscripts/fullscreenshot.sh

bind = SUPER, G, swapactiveworkspaces, DP-2 HDMI-A-1

bind = SUPER,W,exec, pkill .waybar-wrapped || systemctl --user start waybar.service
bind = SUPER,minus,togglesplit # also broken; maybe caused by layout setting

bind = SUPER,F12,exec,~/.config/dotscripts/switchxkblayout.sh



## WINDOW RULES ##
windowrule = size 1195 690, class:kitty

windowrule = float, class:fsearch

windowrule = size 930 600, title:(Chatterino)\s(Settings)

windowrule = float, title:Picture-in-Picture
windowrule = size 1280 720, title:Picture-in-Picture
windowrule = center, title:Picture-in-Picture
windowrule = noborder, title:Picture-in-Picture

windowrule = opacity 0.93, class:lmms

windowrule = suppressevent maximize, class:.*

windowrule = workspace 8 silent, class:discord

windowrule = workspace 3 silent, class:steam
windowrule = noinitialfocus, initialTitle:steam

windowrule = workspace 4 silent, class:cs2
windowrule = workspace 4 silent, initialClass:cs2
windowrule = immediate, class:cs2
windowrule = fullscreen, class:cs2
windowrule = noinitialfocus, class:cs2
windowrule = noinitialfocus, initialClass:cs2

windowrule = workspace 4 silent, class:wow.exe

windowrule = workspace 4 silent, class:hl_linux
windowrule = noinitialfocus, initialTitle:hl_linux

# asseto corsa
windowrule = workspace 4 silent, class:steam_app_244210

windowrule = workspace 4 silent, class:tf_linux64
windowrule = maximize, class:tf_linux64
windowrule = fullscreen, class:tf_linux64

windowrule = float, class:com.saivert.pwvucontrol
windowrule = size 850 600, class:com.saivert.pwvucontrol
windowrule = move 1060 30, class:com.saivert.pwvucontrol

windowrule = float, class:org.gnome.Calculator
windowrule = size 360 620, class:org.gnome.Calculator
windowrule = move 10 450, class:org.gnome.Calculator


## SWITCHING WORKSPACES ##
bind = SHIFT, F1, workspace, 1
bind = SHIFT, F2, workspace, 2
bind = SHIFT, F3, workspace, 3
bind = SHIFT, F4, workspace, 4
bind = SHIFT, F5, workspace, 5
bind = SHIFT, F6, workspace, 6
bind = SHIFT, F7, workspace, 7
bind = SHIFT, F8, workspace, 8

bind = SUPER,mouse_up, workspace, e-1
bind = SUPER,mouse_down, workspace, e+1
bind = SUPER_ALT, K, workspace, e-1
bind = SUPER_ALT, J, workspace, e+1

bind = SUPER, 1, movetoworkspacesilent, 1
bind = SUPER, 2, movetoworkspacesilent, 2
bind = SUPER, 3, movetoworkspacesilent, 3
bind = SUPER, 4, movetoworkspacesilent, 4
bind = SUPER, 5, movetoworkspacesilent, 5
bind = SUPER, 6, movetoworkspacesilent, 6
bind = SUPER, 7, movetoworkspacesilent, 7
bind = SUPER, 8, movetoworkspacesilent, 8


## MEDIA FN KEYS ##
bind = ,XF86AudioPrev, exec, playerctl -p spotify previous
bind = ,XF86AudioNext, exec, playerctl -p spotify next
bind = ,XF86AudioPlay, exec, playerctl -p spotify play-pause
bind = ,XF86AudioStop, exec, playerctl -p spotify shuffle toggle
bind = ,XF86AudioMute, exec, pamixer --toggle-mute
binde = ,XF86AudioLowerVolume, exec, pamixer --decrease 1
binde = ,XF86AudioRaiseVolume, exec, pamixer --increase 1


## WORKSPACES RULES ##
workspace = 1, monitor:DP-2, default:true
workspace = 2, monitor:DP-2
workspace = 3, monitor:DP-2
workspace = 4, monitor:DP-2
workspace = 5, monitor:HDMI-A-1
workspace = 6, monitor:HDMI-A-1
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:HDMI-A-1, default:true

## LAYER RULES ##
# layerrule = blur,waybar
layerrule = blur,rofi
layerrule = ignorezero, rofi

# plugins {
#     csgo-vulkan-fix {
#        res_w = 1920
#        res_h = 1080
#        class = cs2
#        fix_mouse = false
#     }
# }
